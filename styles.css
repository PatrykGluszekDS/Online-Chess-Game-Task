:root{
  --bg: #0f1115;
  --panel: #171a21;
  --accent: #3ea76f;
  --text: #e7e9ee;
  --muted: #9aa3b2;
  --square-light: #eeeed2;
  --square-dark: #769656;
  --square-hover: rgba(255,255,0,.25);
  --board-shadow: 0 10px 30px rgba(0,0,0,.35);
}

*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  color: var(--text);
  background: radial-gradient(1000px 600px at 20% -10%, #1b2030, #0f1115);
}

.app-header, .app-footer{
  max-width: 1200px; margin: 0 auto; padding: 16px;
  display:flex; align-items:center; justify-content:space-between;
}
.app-header h1{ margin:0; font-weight:700; letter-spacing:.2px; }
.status{ display:flex; gap:12px; align-items:center; }
#btn-restart{
  background: var(--accent); color:#07120b; border:0; padding:8px 12px; border-radius:12px;
  font-weight:600; cursor:pointer; box-shadow: var(--board-shadow);
}
#btn-restart:hover{ filter: brightness(1.05); }

.layout{
  max-width: 1200px; margin: 0 auto; padding: 12px 16px 32px;
  display:grid; grid-template-columns: minmax(300px, 1fr) 330px; gap: 24px;
}
@media (max-width: 960px){
  .layout{ grid-template-columns: 1fr; }
}

.board-wrap{
  position: relative;
  place-self: start center;
  width:min(90vw, 700px);
  aspect-ratio: 1 / 1;
}
#board{
  width:100%; height:100%;
  display:grid;
  /* 8x8 grid; squares will be added in JS next step */
  grid-template-columns: repeat(8, 1fr);
  grid-template-rows: repeat(8, 1fr);
  border-radius: 16px;
  overflow: hidden;
  box-shadow: var(--board-shadow);
  outline: 2px solid rgba(255,255,255,.08);
  background: #222831; /* placeholder when empty */
  user-select: none;
}

.square{
  position:relative;
  display:flex; align-items:center; justify-content:center;
  font-size: clamp(18px, 3.2vw, 36px);
  line-height:1;
}
.square.light{ background: var(--square-light); }
.square.dark { background: var(--square-dark); }
.square:hover{ box-shadow: inset 0 0 0 9999px var(--square-hover); }

/* coordinates ribbons (optional visual hint) */
.coords{
  position:absolute; pointer-events:none; color: rgba(0,0,0,.45);
  font-size: 12px; letter-spacing:.3px;
}
.coords-files{
  bottom:-22px; left:0; right:0; display:grid; grid-template-columns: repeat(8,1fr); gap:0;
  text-align:center; color: var(--muted);
}
.coords-ranks{
  top:0; bottom:0; left:-22px; display:grid; grid-template-rows: repeat(8,1fr); gap:0;
  align-items:center; color: var(--muted);
}

/* side panels */
.side{ display:flex; flex-direction:column; gap:16px; }
.panel{
  background: var(--panel);
  border: 1px solid rgba(255,255,255,.06);
  border-radius: 16px;
  padding: 14px;
  box-shadow: var(--board-shadow);
}
.panel h2{ margin: 2px 0 10px; font-size: 18px; }
.panel h3{ margin: 8px 0 6px; font-size: 14px; color: var(--muted); }

.move-list{
  margin:0; padding-left: 20px; max-height: 240px; overflow:auto;
}
.captured{ display:flex; gap:16px; }
.captured-row{
  min-height: 28px; display:flex; gap:6px; flex-wrap:wrap;
  filter: saturate(1.1);
}

.app-footer{ opacity:.7; justify-content:center; }

/* --- pieces (Step 3) --- */
.piece{
  font-size: clamp(28px, 6vw, 56px);
  line-height: 1;
  user-select: none;
  cursor: pointer;
  text-shadow: 0 1px 0 rgba(0,0,0,.25);
}
.square.light .piece{ color:#111; }
.square.dark  .piece{ color:#fff; }

.square.selected{
  outline: 3px solid rgba(255, 215, 0, .9);
  outline-offset: -3px;
}

.square.hint-move::after,
.square.hint-capture::after{
  content:"";
  position:absolute; inset:0;
  display:block;
}

.square.hint-move::after{
  /* dot for quiet moves */
  width:36%;
  height:36%;
  margin:auto;
  border-radius:50%;
  background: rgba(0,0,0,.25);
}

.square.hint-capture::after{
  /* ring for captures */
  border: 5px solid rgba(230, 57, 70, .9);
  border-radius: 12px;
  box-shadow: inset 0 0 0 9999px rgba(230,57,70,.08);
}

/* --- Step 6: last move + check badge + small UX --- */
.square.last-move {
  box-shadow: inset 0 0 0 9999px rgba(255, 235, 59, .22);
}

.status .check-badge{
  display:inline-block;
  margin-left:8px;
  padding:2px 6px;
  border-radius:10px;
  background:#e63946;
  color:#fff;
  font-size:12px;
  font-weight:700;
}

.square { cursor: default; }
.piece { cursor: pointer; }

/* --- Step 7: mate/stalemate badges --- */
.status .mate-badge{
  display:inline-block;
  margin-left:8px;
  padding:2px 6px;
  border-radius:10px;
  background:#d00000;
  color:#fff;
  font-size:12px;
  font-weight:700;
}
.status .stale-badge{
  display:inline-block;
  margin-left:8px;
  padding:2px 6px;
  border-radius:10px;
  background:#495057;
  color:#fff;
  font-size:12px;
  font-weight:700;
}

